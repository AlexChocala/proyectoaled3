<div style="display: flex; gap: 2rem; align-items: flex-start;">
  <!-- FILTRADOR -->
  <aside
    style="width: 250px; min-width: 200px; border: 1px solid #ddd; border-radius: 8px; padding: 1rem; box-shadow: 0 0 10px #eee;">
    <!-- Título de filtros -->
    <h2 style="margin-top: 0; margin-bottom: 1rem; font-weight: 600;">Filtros</h2>

    <!-- Campo de búsqueda con ícono -->
    <mat-form-field appearance="outline" style="width: 100%;">
      <mat-label>Búsqueda</mat-label>
      <input matInput [(ngModel)]="busqueda" placeholder="Buscar productos..." />
      <mat-icon matSuffix>search</mat-icon> <!-- agregué esto para ícono de lupa -->
    </mat-form-field>

    <!-- Lista de categorías -->
    <section style="margin-top: 2rem;">
      <h3 style="font-weight: 500; margin-bottom: 0.5rem;">Categorías</h3>
      <nav>
        <ul style="list-style: none; padding-left: 0;">
          <!-- Categorías disponibles -->
          <li *ngFor="let categoria of categoriasDisponibles"
            style="cursor: pointer; margin-bottom: 0.5rem; color: #1976d2;"
            [style.fontWeight]="categoriaSeleccionada === categoria ? '700' : '400'"
            (click)="seleccionarCategoria(categoria)">
            • {{ categoria }}
          </li>
        </ul>
      </nav>
    </section>

    <!-- Botón para agregar producto, solo si está logueado -->
    <button *ngIf="estaLogueado" mat-raised-button class="boton-nuevo-producto" (click)="agregar()">
      Nuevo producto
      <mat-icon class="icono-agregar">add</mat-icon>
    </button>
  </aside>

  <!-- GRID DE PRODUCTOS -->
  <main style="flex: 1;">
    <div class="producto-grid">
      <!-- Tarjeta individual -->
      <div *ngFor="let prod of productosFiltrados | productoFiltrar: busqueda | categoriaFiltrar: categoriaSeleccionada"
        class="producto-card mat-elevation-z3">
        <!-- Imagen -->
        <img [src]="prod.imagen" alt="Imagen producto" class="producto-imagen" />
        <div class="producto-contenido">
          <!-- Nombre -->
          <h3>{{ prod.nombre }}</h3>
          <!-- Categoría -->
          <p style="font-size: 0.9rem; color: gray; margin: 0.2rem 0;">{{ prod.categoria }}</p>
          <!-- Precio -->
          <p><strong>${{ prod.precio }}</strong></p>
          <!-- Stock -->
          <p style="font-size: 0.8rem; color: #555;">
            Stock: {{ prod.stock !== undefined && prod.stock !== null ? prod.stock : 'N/A' }}
          </p>
        </div>
        <!-- Acciones, sólo visibles si está logueado -->
        <div class="producto-acciones" *ngIf="estaLogueado">
          <button mat-icon-button color="primary" (click)="editar(prod)">
            <mat-icon>edit</mat-icon>
          </button>
          <button mat-icon-button color="warn" (click)="eliminar(prod)">
            <mat-icon>delete</mat-icon>
          </button>
          <button mat-icon-button color="accent" (click)="agregarAlCarrito(prod)">
            <mat-icon>add_shopping_cart</mat-icon>
          </button>
        </div>
      </div>

      <!-- Mensaje si no hay productos -->
      <div
        *ngIf="(productosFiltrados | productoFiltrar: busqueda | categoriaFiltrar: categoriaSeleccionada).length === 0"
        style="width: 100%; text-align: center; color: gray; margin-top: 4rem; font-size: 1.2rem;">
        No hay productos para mostrar.
      </div>
    </div>
  </main>
</div>